levels(data$dadalive.factor)=c("Yes","No","Unknown")
levels(data$adol_ed.factor)=c("None","Standard 1","Standard 2","Standard 3","Standard 4","Standard 5","Standard 6","Standard 7","Form 1","Form 2","Form 3","Form 4","Form 5","College/Technical School","Some University")
levels(data$adol_ed_ct.factor)=c("None","Standard 1","Standard 2","Standard 3","Standard 4","Standard 5","Standard 6","Standard 7","Form 1","Form 2","Form 3","Form 4","Form 5")
levels(data$attendsch.factor)=c("Yes","No")
levels(data$whynosch.factor)=c("Awaiting results","Death of Parent(s)/Guardian(s)","Drop out","Failed exams","Got a job","Illness","Lack of family support","No funds for school fees","Other, specify reason below")
levels(data$occupation.factor)=c("Student","Worked for pay full-time","Work for pay part-time","Student and part-time paid work","Looking for work/unemployed","Too sick to work or study","Other, specify below")
levels(data$bl_whoimstage.factor)=c("4 (severe)","3 (advanced)","2 (mild)","1","Not available.")
levels(data$bl_whoimstatus.factor)=c("4","3","2","1","Not available.")
levels(data$today_whostage.factor)=c("4 (severe)","3 (advanced)","2 (mild)","1")
levels(data$recent_whoimstat.factor)=c("4 (CD4 < 15% or < 200)","3 (CD4 200-349)","2 (CD4 350-499)","1 (CD4 >= 500)")
levels(data$pmtctrx.factor)=c("None","AZT only","AZT + single dose NVP","Single dose NVP only","Unknown","Other, specify")
levels(data$currentarv___1.factor)=c("Unchecked","Checked")
levels(data$currentarv___2.factor)=c("Unchecked","Checked")
levels(data$currentarv___3.factor)=c("Unchecked","Checked")
levels(data$currentarv___4.factor)=c("Unchecked","Checked")
levels(data$currentarv___5.factor)=c("Unchecked","Checked")
levels(data$currentarv___6.factor)=c("Unchecked","Checked")
levels(data$currentarv___7.factor)=c("Unchecked","Checked")
levels(data$currentarv___8.factor)=c("Unchecked","Checked")
levels(data$currentarv___9.factor)=c("Unchecked","Checked")
levels(data$currentarv___10.factor)=c("Unchecked","Checked")
levels(data$currentarv___11.factor)=c("Unchecked","Checked")
levels(data$currentarv___12.factor)=c("Unchecked","Checked")
levels(data$currentarv___13.factor)=c("Unchecked","Checked")
levels(data$currentarv___98.factor)=c("Unchecked","Checked")
levels(data$memsbottle.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$hivtxhx.factor)=c("Yes","No")
levels(data$howmanyhaart.factor)=c("1 previous regimen","2 previous regimens","3 previous regimens","4 previous regimens","5 previous regimens","6 previous regimens")
levels(data$regimen1___1.factor)=c("Unchecked","Checked")
levels(data$regimen1___2.factor)=c("Unchecked","Checked")
levels(data$regimen1___3.factor)=c("Unchecked","Checked")
levels(data$regimen1___4.factor)=c("Unchecked","Checked")
levels(data$regimen1___5.factor)=c("Unchecked","Checked")
levels(data$regimen1___6.factor)=c("Unchecked","Checked")
levels(data$regimen1___7.factor)=c("Unchecked","Checked")
levels(data$regimen1___8.factor)=c("Unchecked","Checked")
levels(data$regimen1___9.factor)=c("Unchecked","Checked")
levels(data$regimen1___10.factor)=c("Unchecked","Checked")
levels(data$regimen1___11.factor)=c("Unchecked","Checked")
levels(data$regimen1___12.factor)=c("Unchecked","Checked")
levels(data$regimen1___13.factor)=c("Unchecked","Checked")
levels(data$regimen1___14.factor)=c("Unchecked","Checked")
levels(data$regimen1___98.factor)=c("Unchecked","Checked")
levels(data$regimen_2___1.factor)=c("Unchecked","Checked")
levels(data$regimen_2___2.factor)=c("Unchecked","Checked")
levels(data$regimen_2___3.factor)=c("Unchecked","Checked")
levels(data$regimen_2___4.factor)=c("Unchecked","Checked")
levels(data$regimen_2___5.factor)=c("Unchecked","Checked")
levels(data$regimen_2___6.factor)=c("Unchecked","Checked")
levels(data$regimen_2___7.factor)=c("Unchecked","Checked")
levels(data$regimen_2___8.factor)=c("Unchecked","Checked")
levels(data$regimen_2___9.factor)=c("Unchecked","Checked")
levels(data$regimen_2___10.factor)=c("Unchecked","Checked")
levels(data$regimen_2___11.factor)=c("Unchecked","Checked")
levels(data$regimen_2___12.factor)=c("Unchecked","Checked")
levels(data$regimen_2___13.factor)=c("Unchecked","Checked")
levels(data$regimen_2___14.factor)=c("Unchecked","Checked")
levels(data$regimen_2___98.factor)=c("Unchecked","Checked")
levels(data$regimen_3___1.factor)=c("Unchecked","Checked")
levels(data$regimen_3___2.factor)=c("Unchecked","Checked")
levels(data$regimen_3___3.factor)=c("Unchecked","Checked")
levels(data$regimen_3___4.factor)=c("Unchecked","Checked")
levels(data$regimen_3___5.factor)=c("Unchecked","Checked")
levels(data$regimen_3___6.factor)=c("Unchecked","Checked")
levels(data$regimen_3___7.factor)=c("Unchecked","Checked")
levels(data$regimen_3___8.factor)=c("Unchecked","Checked")
levels(data$regimen_3___9.factor)=c("Unchecked","Checked")
levels(data$regimen_3___10.factor)=c("Unchecked","Checked")
levels(data$regimen_3___11.factor)=c("Unchecked","Checked")
levels(data$regimen_3___12.factor)=c("Unchecked","Checked")
levels(data$regimen_3___13.factor)=c("Unchecked","Checked")
levels(data$regimen_3___14.factor)=c("Unchecked","Checked")
levels(data$regimen_3___98.factor)=c("Unchecked","Checked")
levels(data$regimen4___1.factor)=c("Unchecked","Checked")
levels(data$regimen4___2.factor)=c("Unchecked","Checked")
levels(data$regimen4___3.factor)=c("Unchecked","Checked")
levels(data$regimen4___4.factor)=c("Unchecked","Checked")
levels(data$regimen4___5.factor)=c("Unchecked","Checked")
levels(data$regimen4___6.factor)=c("Unchecked","Checked")
levels(data$regimen4___7.factor)=c("Unchecked","Checked")
levels(data$regimen4___8.factor)=c("Unchecked","Checked")
levels(data$regimen4___9.factor)=c("Unchecked","Checked")
levels(data$regimen4___10.factor)=c("Unchecked","Checked")
levels(data$regimen4___11.factor)=c("Unchecked","Checked")
levels(data$regimen4___12.factor)=c("Unchecked","Checked")
levels(data$regimen4___13.factor)=c("Unchecked","Checked")
levels(data$regimen4___14.factor)=c("Unchecked","Checked")
levels(data$regimen4___98.factor)=c("Unchecked","Checked")
levels(data$regimen_5___1.factor)=c("Unchecked","Checked")
levels(data$regimen_5___2.factor)=c("Unchecked","Checked")
levels(data$regimen_5___3.factor)=c("Unchecked","Checked")
levels(data$regimen_5___4.factor)=c("Unchecked","Checked")
levels(data$regimen_5___5.factor)=c("Unchecked","Checked")
levels(data$regimen_5___6.factor)=c("Unchecked","Checked")
levels(data$regimen_5___7.factor)=c("Unchecked","Checked")
levels(data$regimen_5___8.factor)=c("Unchecked","Checked")
levels(data$regimen_5___9.factor)=c("Unchecked","Checked")
levels(data$regimen_5___10.factor)=c("Unchecked","Checked")
levels(data$regimen_5___11.factor)=c("Unchecked","Checked")
levels(data$regimen_5___12.factor)=c("Unchecked","Checked")
levels(data$regimen_5___13.factor)=c("Unchecked","Checked")
levels(data$regimen_5___14.factor)=c("Unchecked","Checked")
levels(data$regimen_5___98.factor)=c("Unchecked","Checked")
levels(data$regimen_6___1.factor)=c("Unchecked","Checked")
levels(data$regimen_6___2.factor)=c("Unchecked","Checked")
levels(data$regimen_6___3.factor)=c("Unchecked","Checked")
levels(data$regimen_6___4.factor)=c("Unchecked","Checked")
levels(data$regimen_6___5.factor)=c("Unchecked","Checked")
levels(data$regimen_6___6.factor)=c("Unchecked","Checked")
levels(data$regimen_6___7.factor)=c("Unchecked","Checked")
levels(data$regimen_6___8.factor)=c("Unchecked","Checked")
levels(data$regimen_6___9.factor)=c("Unchecked","Checked")
levels(data$regimen_6___10.factor)=c("Unchecked","Checked")
levels(data$regimen_6___11.factor)=c("Unchecked","Checked")
levels(data$regimen_6___12.factor)=c("Unchecked","Checked")
levels(data$regimen_6___13.factor)=c("Unchecked","Checked")
levels(data$regimen_6___14.factor)=c("Unchecked","Checked")
levels(data$regimen_6___98.factor)=c("Unchecked","Checked")
levels(data$typehouse.factor)=c("Brick house/apartment/townhouse","Outside room/flat in a backyard","Orphanage/childrens home","School dorm","Traditional hut/house","Other, specify below")
levels(data$amenities___1.factor)=c("Unchecked","Checked")
levels(data$amenities___2.factor)=c("Unchecked","Checked")
levels(data$amenities___3.factor)=c("Unchecked","Checked")
levels(data$amenities___4.factor)=c("Unchecked","Checked")
levels(data$amenities___5.factor)=c("Unchecked","Checked")
levels(data$amenities___6.factor)=c("Unchecked","Checked")
levels(data$amenities___7.factor)=c("Unchecked","Checked")
levels(data$amenities___8.factor)=c("Unchecked","Checked")
levels(data$amenities___9.factor)=c("Unchecked","Checked")
levels(data$amenities___10.factor)=c("Unchecked","Checked")
levels(data$amenities___11.factor)=c("Unchecked","Checked")
levels(data$amenities___12.factor)=c("Unchecked","Checked")
levels(data$amenities___0.factor)=c("Unchecked","Checked")
levels(data$mealsday.factor)=c("1 meal","2 meals","3 meals",">3 meals")
levels(data$nofood.factor)=c("Yes","No")
levels(data$healer.factor)=c("Yes","No")
levels(data$smoke.factor)=c("Yes, I currently smoke every day","Yes, I currently smoke but not every day","I used to smoke, but I do not currently","I never smoked","Refused to answer")
levels(data$alcohol.factor)=c("Yes","No","Refused to answer")
levels(data$freq_etoh.factor)=c("Never","Monthly or less","2-4 times per month","2-3 times per week","4 or more times per week")
levels(data$drunk.factor)=c("Yes","No","Refused to answer")
levels(data$drunk_freq.factor)=c("Most weeks I get drunk more than once","I get drunk about once a week","I get drunk between once a week and once a month","I get drunk less than once a month")
levels(data$recdrugs___1.factor)=c("Unchecked","Checked")
levels(data$recdrugs___2.factor)=c("Unchecked","Checked")
levels(data$recdrugs___3.factor)=c("Unchecked","Checked")
levels(data$recdrugs___4.factor)=c("Unchecked","Checked")
levels(data$recdrugs___5.factor)=c("Unchecked","Checked")
levels(data$recdrugs___6.factor)=c("Unchecked","Checked")
levels(data$recdrugs___98.factor)=c("Unchecked","Checked")
levels(data$recdrugs___0.factor)=c("Unchecked","Checked")
levels(data$recdrugs___97.factor)=c("Unchecked","Checked")
levels(data$moi_who.factor)=c("Adolescent","Caregiver")
levels(data$status.factor)=c("Yes","No")
levels(data$moi_how___1.factor)=c("Unchecked","Checked")
levels(data$moi_how___2.factor)=c("Unchecked","Checked")
levels(data$moi_how___3.factor)=c("Unchecked","Checked")
levels(data$moi_how___4.factor)=c("Unchecked","Checked")
levels(data$moi_how___5.factor)=c("Unchecked","Checked")
levels(data$moi_how___98.factor)=c("Unchecked","Checked")
levels(data$mostlikely_moi.factor)=c("I was born with it","I was breastfed by someone with HIV","From a blood transfusion","From a boyfriend OR girlfriend","From an unwanted sexual encounter (rape)","Other (see reason given above)")
levels(data$adolescent_baseline_form_cedf_complete.factor)=c("Incomplete","Unverified","Complete")
levels(data$memsbottle_fu.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$dload.factor)=c("Yes","No")
levels(data$nodload.factor)=c("Lost cap","Forgot to bring cap","Other, specify below")
levels(data$usedmems.factor)=c("Yes","No")
levels(data$nomems.factor)=c("Lost cap or problem with cap","Patient instructed to stop treatment","Patient/family decided on their own to stop treatment (please provide detail below)","Other, specify below")
levels(data$newcap.factor)=c("Yes","No")
levels(data$mems_wait.factor)=c("Within 5 minutes","Between 5 minutes and half an hour","Between half an hour and an hour","More than an hour")
levels(data$mems_plan.factor)=c("Never","A few times each month","A few times each week","Almost every day","Every day")
levels(data$mems_noremove.factor)=c("Never","A few times each month","A few times each week","Almost every day","Every day")
levels(data$mems_cap_questionnaire_complete.factor)=c("Incomplete","Unverified","Complete")
levels(data$overnight_times.factor)=c("0 times","1 time","2 times","3 times","4 times","5 times","6 times")
levels(data$where_time1.factor)=c("Home Village","Lands","Cattle Post","School Trip","Funeral","Wedding","Other, specify below")
levels(data$where_time2.factor)=c("Home Village","Lands","Cattle Post","School Trip","Funeral","Wedding","Other, specify below")
levels(data$where_time3.factor)=c("Home Village","Lands","Cattle Post","School Trip","Funeral","Wedding","Other, specify below")
levels(data$where_time4.factor)=c("Home Village","Lands","Cattle Post","School Trip","Funeral","Wedding","Other, specify below")
levels(data$where_time5.factor)=c("Home Village","Lands","Cattle Post","School Trip","Funeral","Wedding","Other, specify below")
levels(data$where_time6.factor)=c("Home Village","Lands","Cattle Post","School Trip","Funeral","Wedding","Other, specify below")
levels(data$mjrlife___1.factor)=c("Unchecked","Checked")
levels(data$mjrlife___2.factor)=c("Unchecked","Checked")
levels(data$mjrlife___3.factor)=c("Unchecked","Checked")
levels(data$mjrlife___4.factor)=c("Unchecked","Checked")
levels(data$mjrlife___5.factor)=c("Unchecked","Checked")
levels(data$mjrlife___6.factor)=c("Unchecked","Checked")
levels(data$mjrlife___7.factor)=c("Unchecked","Checked")
levels(data$mjrlife___98.factor)=c("Unchecked","Checked")
levels(data$numbervl.factor)=c("labs were not done at last study visit nor were any done in the interim","1 time","2 times","3 times","4 times")
levels(data$numbercd4.factor)=c("labs were not done at last study visit nor were any done in the interim","1 time","2 times","3 times","4 times")
levels(data$vl1_undetect.factor)=c("Yes","No")
levels(data$vl2_undetect.factor)=c("Yes","No")
levels(data$vl3_undetect.factor)=c("Yes","No")
levels(data$vl4_undetect.factor)=c("Yes","No")
levels(data$newdisclose.factor)=c("Yes","No","Not applicable (participant already knew status)")
levels(data$worsewhostage.factor)=c("Yes","No")
levels(data$newwhostage.factor)=c("WHO clinical category 2","WHO clinical category 3","WHO clinical category 4")
levels(data$arvchange.factor)=c("Yes","No")
levels(data$whyarvchange___1.factor)=c("Unchecked","Checked")
levels(data$whyarvchange___2.factor)=c("Unchecked","Checked")
levels(data$whyarvchange___3.factor)=c("Unchecked","Checked")
levels(data$whyarvchange___4.factor)=c("Unchecked","Checked")
levels(data$whyarvchange___98.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___1.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___2.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___3.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___4.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___5.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___6.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___7.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___8.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___9.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___10.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___11.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___12.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___13.factor)=c("Unchecked","Checked")
levels(data$newarvregimen___98.factor)=c("Unchecked","Checked")
levels(data$tb_tx.factor)=c("Yes","No")
levels(data$rifampin.factor)=c("Yes","No")
levels(data$interim_clinical_data_form_acaa_complete.factor)=c("Incomplete","Unverified","Complete")
levels(data$indexdrug.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$num_refills.factor)=c("There is not enough information to complete any part of this form.","1","2","3","4")
levels(data$enoughinfor1.factor)=c("Yes","No")
levels(data$whopickup_1.factor)=c("Adolescent","Adolescent + Parent/Adult Caregiver","Parent/Adult Caregiver without Adolescent")
levels(data$acgrole_1.factor)=c("Mother","Father","Grandmother","Grandfather","Aunt","Uncle","Sister","Brother","Female Cousin","Male Cousin","Other (specify relationship below)")
levels(data$enoughinfor2.factor)=c("Yes","No")
levels(data$whopickup_2.factor)=c("Adolescent","Adolescent + Parent/Adult Caregiver","Parent/Adult Caregiver without Adolescent")
levels(data$acgrole_2.factor)=c("Mother","Father","Grandmother","Grandfather","Aunt","Uncle","Sister","Brother","Female Cousin","Male Cousin","Other (specify relationship below)")
levels(data$enoughinfor3.factor)=c("Yes","No")
levels(data$whopickup_3.factor)=c("Adolescent","Adolescent + Parent/Adult Caregiver","Parent/Adult Caregiver without Adolescent")
levels(data$acgrole_3.factor)=c("Mother","Father","Grandmother","Grandfather","Aunt","Uncle","Sister","Brother","Female Cousin","Male Cousin","Other (specify relationship below)")
levels(data$enoughinfor4.factor)=c("Yes","No")
levels(data$whopickup_4.factor)=c("Adolescent","Adolescent + Parent/Adult Caregiver","Parent/Adult Caregiver without Adolescent")
levels(data$acgrole_4.factor)=c("Mother","Father","Grandmother","Grandfather","Aunt","Uncle","Sister","Brother","Female Cousin","Male Cousin","Other (specify relationship below)")
levels(data$enoughpc1.factor)=c("Yes","No")
levels(data$difference_1.factor)=c("Yes","No")
levels(data$difference_howmany_1.factor)=c("1 other ARV (ARV #1 below)","2 other ARVs (ARV #1 and #2 below)","3 other ARVs (ARV #1 and #2 and #3 below)")
levels(data$arv5difference_1_1.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_2_1.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_3_1.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$enoughpc2.factor)=c("Yes","No")
levels(data$difference_2.factor)=c("Yes","No")
levels(data$difference_howmany_2.factor)=c("1 other ARV (ARV #1 below)","2 other ARVs (ARV #1 and #2 below)","3 other ARVs (ARV #1 and #2 and #3 below)")
levels(data$arv5difference_1_2.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_2_2.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_3_2.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$enoughpc3.factor)=c("Yes","No")
levels(data$difference_3.factor)=c("Yes","No")
levels(data$difference_howmany_3.factor)=c("1 other ARV (ARV #1 below)","2 other ARVs (ARV #1 and #2 below)","3 other ARVs (ARV #1 and #2 and #3 below)")
levels(data$arv5difference_1_3.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_2_3.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_3_3.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$enoughpc4.factor)=c("Yes","No")
levels(data$difference_4.factor)=c("Yes","No")
levels(data$difference_howmany_4.factor)=c("1 other ARV (ARV #1 below)","2 other ARVs (ARV #1 and #2 below)","3 other ARVs (ARV #1 and #2 and #3 below)")
levels(data$arv5difference_1_4.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_2_4.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$arv5difference_3_4.factor)=c("EFV+TDF+FTC (Atripla)","3TC+AZT (Combivir)","ABC+3TC (Epzicom)","TDF+FTC (Truvada)","Nevirapine (NVP)","Efavirenz (EFV)","Kaletra (LPV/r)","Zidovudine (AZT)","Lamivudine (3TC)","Abacavir (ABC)","Didanosine (ddI)","Tenofovir (TDF)","Stavudine (d4T)","Other, specify")
levels(data$refill_pillcount_form_complete.factor)=c("Incomplete","Unverified","Complete")
#Save file
write.csv(data, file = "rawdata_11.20.22.csv")
data <- data %>% select(study_id, dob, sex, momalive, dadalive, adol_ed, attendsch, occupation, hivdx, initiatearv, redcap_event_name, detectable, vlvalue, sex, currentarv___1, currentarv___2, currentarv___3, currentarv___4, currentarv___5, currentarv___6, currentarv___7, currentarv___8, currentarv___9, currentarv___10, currentarv___11, currentarv___12, currentarv___13, currentarv___98, hivvl_date, houseroom, peoplehouse, kidshouse, amenities___5, amenities___6, smoke, alcohol, freq_etoh, drunk, drunk_freq, recdrugs___0, recdrugs___1, recdrugs___2, recdrugs___3, recdrugs___4, recdrugs___5, recdrugs___6, recdrugs___98, memsbottle, status, memsbottle_fu, overnight_times, duration_time1, where_time1, duration_time2, where_time2, duration_time3, where_time3, duration_time4, where_time4, duration_time5, where_time5, duration_time6, where_time6, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, newdisclose, numbervl, vl1date, numbercd4, vl1_undetect, vl1value, cd41abs, cd41pct, vl2date, vl2_undetect, vl2value, cd42abs, cd42pct, vl3date, vl3_undetect, vl3value, cd43abs, cd43pct, vl4date, vl4_undetect, vl4value, cd44abs, cd44pct, remaining_1, dispensed_1, perday_1, adherence1, difference_1, difference_howmany_1, arv5difference_1_1, remaining_arv1_1, perday_arv1_1, adherence_arv1_1, arv5difference_2_1, remaining_arv2_1, perday_arv2_1, adherence_arv2_1, arv5difference_3_1, remaining_arv3_1, perday_arv3_1, adherence_arv3_1, remaining_2, dispensed_2, perday_2, adherence2, difference_2, difference_howmany_2, arv5difference_1_2, remaining_arv1_2, perday_arv1_2, adherence_arv1_2, arv5difference_2_2, remaining_arv2_2, perday_arv2_2, adherence_arv2_2, arv5difference_3_2, remaining_arv3_2, perday_arv3_2, adherence_arv3_2, remaining_3, dispensed_3, perday_3, adherence3, difference_3, difference_howmany_3, arv5difference_1_3, remaining_arv1_3, perday_arv1_3, adherence_arv1_3, arv5difference_2_3, remaining_arv2_3, perday_arv2_3, adherence_arv2_3, arv5difference_3_3, remaining_arv3_3, perday_arv3_3, adherence_arv3_3, remaining_4, dispensed_4, perday_4, adherence4, difference_4, difference_howmany_4, arv5difference_1_4, remaining_arv1_4, perday_arv1_4, adherence_arv1_4, arv5difference_2_4, remaining_arv2_4, perday_arv2_4, adherence_arv2_4, arv5difference_3_4, remaining_arv3_4, perday_arv3_4, adherence_arv3_4)
#Creating new visit variable
data <- data %>% mutate(month = ifelse(redcap_event_name=="month_0_eligibilit_arm_1", 0, ifelse(redcap_event_name=="month_3_arm_1", 3, ifelse(redcap_event_name=="month_6_arm_1", 6, ifelse(redcap_event_name=="month_9_arm_1", 9, ifelse(redcap_event_name=="month_12_arm_1", 12, ifelse(redcap_event_name=="month_15_arm_1", 15, ifelse(redcap_event_name=="month_18_arm_1", 18, ifelse(redcap_event_name=="month_21_arm_21", 21, ifelse(redcap_event_name=="month_24_final_vis_arm_1", 24, ifelse(redcap_event_name=="month_27_arm_1", 27, ifelse(redcap_event_name=="month_30_arm_1", 30, ifelse(redcap_event_name=="month_33_arm_1", 33, ifelse(redcap_event_name=="month_36_arm_1", 36, ifelse(redcap_event_name=="month_42_arm_1", 42, ifelse(redcap_event_name=="month_48_arm_1", 48, ifelse(redcap_event_name=="month_54_arm_1", 54, 999)))))))))))))))))
#Removing study ID < 401 and withdrawal/completion visit row
data <- data %>% subset(study_id < 401) %>%
subset(month != 999)
#Generate socioeconomic variable, drop interim socioeconomic variables
data <- data %>% mutate(houseppl_ratio = houseroom/peoplehouse, socio_house = if_else(houseppl_ratio > 1, 1, 0), socio_total = socio_house + amenities___5 + amenities___6) %>%
subset(select = -c(houseroom, peoplehouse, amenities___5, amenities___6, houseppl_ratio, socio_house))
#Generate age at diagnosis and age at ART initiation
data$dob <- ymd(data$dob)
data$hivdx <- ymd(data$hivdx)
data$initiatearv <- ymd(data$initiatearv)
data <- data %>%
mutate(age_dx = (dob %--% hivdx) / years(1)) %>%
mutate(age_tx = (dob %--% initiatearv) / years(1))
#Generating detectable viral load variable - if VL was detectable at any lab for a given visit, consider patient detectable
data <- data %>%
mutate(detectable = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0))
#Removing unneeded variables
data <- data %>%
select(study_id, sex, dob, month, age_dx, age_tx, momalive, dadalive, adol_ed, detectable, kidshouse, smoke, alcohol, freq_etoh, drunk, drunk_freq, status, newdisclose, overnight_times, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, detectable, socio_total)
data_wide <- pivot_wider(data, id_cols = study_id, names_from = month, values_from = c(sex, dob, age_dx, age_tx, momalive, dadalive, adol_ed, detectable, kidshouse, smoke, alcohol, freq_etoh, drunk, drunk_freq, status, newdisclose, overnight_times, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, detectable, socio_total))
View(data_wide)
#load data (Avoid long cleaning above)
data <- read.csv("rawdata_11.20.22.csv")
data <- data %>% select(study_id, dob, sex, momalive, dadalive, adol_ed, attendsch, occupation, hivdx, initiatearv, redcap_event_name, detectable, vlvalue, sex, currentarv___1, currentarv___2, currentarv___3, currentarv___4, currentarv___5, currentarv___6, currentarv___7, currentarv___8, currentarv___9, currentarv___10, currentarv___11, currentarv___12, currentarv___13, currentarv___98, hivvl_date, houseroom, peoplehouse, kidshouse, amenities___5, amenities___6, smoke, alcohol, freq_etoh, drunk, drunk_freq, recdrugs___0, recdrugs___1, recdrugs___2, recdrugs___3, recdrugs___4, recdrugs___5, recdrugs___6, recdrugs___98, memsbottle, status, memsbottle_fu, overnight_times, duration_time1, where_time1, duration_time2, where_time2, duration_time3, where_time3, duration_time4, where_time4, duration_time5, where_time5, duration_time6, where_time6, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, newdisclose, numbervl, vl1date, numbercd4, vl1_undetect, vl1value, cd41abs, cd41pct, vl2date, vl2_undetect, vl2value, cd42abs, cd42pct, vl3date, vl3_undetect, vl3value, cd43abs, cd43pct, vl4date, vl4_undetect, vl4value, cd44abs, cd44pct, remaining_1, dispensed_1, perday_1, adherence1, difference_1, difference_howmany_1, arv5difference_1_1, remaining_arv1_1, perday_arv1_1, adherence_arv1_1, arv5difference_2_1, remaining_arv2_1, perday_arv2_1, adherence_arv2_1, arv5difference_3_1, remaining_arv3_1, perday_arv3_1, adherence_arv3_1, remaining_2, dispensed_2, perday_2, adherence2, difference_2, difference_howmany_2, arv5difference_1_2, remaining_arv1_2, perday_arv1_2, adherence_arv1_2, arv5difference_2_2, remaining_arv2_2, perday_arv2_2, adherence_arv2_2, arv5difference_3_2, remaining_arv3_2, perday_arv3_2, adherence_arv3_2, remaining_3, dispensed_3, perday_3, adherence3, difference_3, difference_howmany_3, arv5difference_1_3, remaining_arv1_3, perday_arv1_3, adherence_arv1_3, arv5difference_2_3, remaining_arv2_3, perday_arv2_3, adherence_arv2_3, arv5difference_3_3, remaining_arv3_3, perday_arv3_3, adherence_arv3_3, remaining_4, dispensed_4, perday_4, adherence4, difference_4, difference_howmany_4, arv5difference_1_4, remaining_arv1_4, perday_arv1_4, adherence_arv1_4, arv5difference_2_4, remaining_arv2_4, perday_arv2_4, adherence_arv2_4, arv5difference_3_4, remaining_arv3_4, perday_arv3_4, adherence_arv3_4)
#Creating new visit variable
data <- data %>% mutate(month = ifelse(redcap_event_name=="month_0_eligibilit_arm_1", 0, ifelse(redcap_event_name=="month_3_arm_1", 3, ifelse(redcap_event_name=="month_6_arm_1", 6, ifelse(redcap_event_name=="month_9_arm_1", 9, ifelse(redcap_event_name=="month_12_arm_1", 12, ifelse(redcap_event_name=="month_15_arm_1", 15, ifelse(redcap_event_name=="month_18_arm_1", 18, ifelse(redcap_event_name=="month_21_arm_21", 21, ifelse(redcap_event_name=="month_24_final_vis_arm_1", 24, ifelse(redcap_event_name=="month_27_arm_1", 27, ifelse(redcap_event_name=="month_30_arm_1", 30, ifelse(redcap_event_name=="month_33_arm_1", 33, ifelse(redcap_event_name=="month_36_arm_1", 36, ifelse(redcap_event_name=="month_42_arm_1", 42, ifelse(redcap_event_name=="month_48_arm_1", 48, ifelse(redcap_event_name=="month_54_arm_1", 54, 999)))))))))))))))))
#Removing study ID < 401 and withdrawal/completion visit row
data <- data %>% subset(study_id < 401) %>%
subset(month != 999)
data <- data %>% mutate(houseppl_ratio = houseroom/peoplehouse, socio_house = if_else(houseppl_ratio > 1, 1, 0), socio_total = socio_house + amenities___5 + amenities___6) %>%
subset(select = -c(houseroom, peoplehouse, amenities___5, amenities___6, houseppl_ratio, socio_house))
data$dob <- ymd(data$dob)
data$hivdx <- ymd(data$hivdx)
data$initiatearv <- ymd(data$initiatearv)
data <- data %>%
mutate(age_dx = (dob %--% hivdx) / years(1)) %>%
mutate(age_tx = (dob %--% initiatearv) / years(1))
#Generating detectable viral load variable - if VL was detectable at any lab for a given visit, consider patient detectable
data <- data %>%
mutate(detectable = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0))
View(data)
rm(data)
data <- read.csv("rawdata_11.20.22.csv")
#Dropping unnecessary variables
data <- data %>% select(study_id, dob, sex, momalive, dadalive, adol_ed, attendsch, occupation, hivdx, initiatearv, redcap_event_name, detectable, vlvalue, sex, currentarv___1, currentarv___2, currentarv___3, currentarv___4, currentarv___5, currentarv___6, currentarv___7, currentarv___8, currentarv___9, currentarv___10, currentarv___11, currentarv___12, currentarv___13, currentarv___98, hivvl_date, houseroom, peoplehouse, kidshouse, amenities___5, amenities___6, smoke, alcohol, freq_etoh, drunk, drunk_freq, recdrugs___0, recdrugs___1, recdrugs___2, recdrugs___3, recdrugs___4, recdrugs___5, recdrugs___6, recdrugs___98, memsbottle, status, memsbottle_fu, overnight_times, duration_time1, where_time1, duration_time2, where_time2, duration_time3, where_time3, duration_time4, where_time4, duration_time5, where_time5, duration_time6, where_time6, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, newdisclose, numbervl, vl1date, numbercd4, vl1_undetect, vl1value, cd41abs, cd41pct, vl2date, vl2_undetect, vl2value, cd42abs, cd42pct, vl3date, vl3_undetect, vl3value, cd43abs, cd43pct, vl4date, vl4_undetect, vl4value, cd44abs, cd44pct, remaining_1, dispensed_1, perday_1, adherence1, difference_1, difference_howmany_1, arv5difference_1_1, remaining_arv1_1, perday_arv1_1, adherence_arv1_1, arv5difference_2_1, remaining_arv2_1, perday_arv2_1, adherence_arv2_1, arv5difference_3_1, remaining_arv3_1, perday_arv3_1, adherence_arv3_1, remaining_2, dispensed_2, perday_2, adherence2, difference_2, difference_howmany_2, arv5difference_1_2, remaining_arv1_2, perday_arv1_2, adherence_arv1_2, arv5difference_2_2, remaining_arv2_2, perday_arv2_2, adherence_arv2_2, arv5difference_3_2, remaining_arv3_2, perday_arv3_2, adherence_arv3_2, remaining_3, dispensed_3, perday_3, adherence3, difference_3, difference_howmany_3, arv5difference_1_3, remaining_arv1_3, perday_arv1_3, adherence_arv1_3, arv5difference_2_3, remaining_arv2_3, perday_arv2_3, adherence_arv2_3, arv5difference_3_3, remaining_arv3_3, perday_arv3_3, adherence_arv3_3, remaining_4, dispensed_4, perday_4, adherence4, difference_4, difference_howmany_4, arv5difference_1_4, remaining_arv1_4, perday_arv1_4, adherence_arv1_4, arv5difference_2_4, remaining_arv2_4, perday_arv2_4, adherence_arv2_4, arv5difference_3_4, remaining_arv3_4, perday_arv3_4, adherence_arv3_4)
#Creating new visit variable
data <- data %>% mutate(month = ifelse(redcap_event_name=="month_0_eligibilit_arm_1", 0, ifelse(redcap_event_name=="month_3_arm_1", 3, ifelse(redcap_event_name=="month_6_arm_1", 6, ifelse(redcap_event_name=="month_9_arm_1", 9, ifelse(redcap_event_name=="month_12_arm_1", 12, ifelse(redcap_event_name=="month_15_arm_1", 15, ifelse(redcap_event_name=="month_18_arm_1", 18, ifelse(redcap_event_name=="month_21_arm_21", 21, ifelse(redcap_event_name=="month_24_final_vis_arm_1", 24, ifelse(redcap_event_name=="month_27_arm_1", 27, ifelse(redcap_event_name=="month_30_arm_1", 30, ifelse(redcap_event_name=="month_33_arm_1", 33, ifelse(redcap_event_name=="month_36_arm_1", 36, ifelse(redcap_event_name=="month_42_arm_1", 42, ifelse(redcap_event_name=="month_48_arm_1", 48, ifelse(redcap_event_name=="month_54_arm_1", 54, 999)))))))))))))))))
#Removing study ID < 401 and withdrawal/completion visit row
data <- data %>% subset(study_id < 401) %>%
subset(month != 999)
#Generate socioeconomic variable, drop interim socioeconomic variables
data <- data %>% mutate(houseppl_ratio = houseroom/peoplehouse, socio_house = if_else(houseppl_ratio > 1, 1, 0), socio_total = socio_house + amenities___5 + amenities___6) %>%
subset(select = -c(houseroom, peoplehouse, amenities___5, amenities___6, houseppl_ratio, socio_house))
data$dob <- ymd(data$dob)
data$hivdx <- ymd(data$hivdx)
data$initiatearv <- ymd(data$initiatearv)
data <- data %>%
mutate(age_dx = (dob %--% hivdx) / years(1)) %>%
mutate(age_tx = (dob %--% initiatearv) / years(1))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0))
data <- data %>%
select(study_id, sex, dob, month, age_dx, age_tx, momalive, dadalive, adol_ed, detectable, detectable_fu, kidshouse, smoke, alcohol, freq_etoh, drunk, drunk_freq, status, newdisclose, overnight_times, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, detectable, socio_total)
data_wide <- pivot_wider(data, id_cols = study_id, names_from = month, values_from = c(sex, dob, age_dx, age_tx, momalive, dadalive, adol_ed, detectable, detectable_fu, kidshouse, smoke, alcohol, freq_etoh, drunk, drunk_freq, status, newdisclose, overnight_times, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, detectable, socio_total))
View(data)
rm(data)
#load data (Avoid long cleaning above)
data <- read.csv("rawdata_11.20.22.csv")
data <- data %>% select(study_id, dob, sex, momalive, dadalive, adol_ed, attendsch, occupation, hivdx, initiatearv, redcap_event_name, detectable, vlvalue, sex, currentarv___1, currentarv___2, currentarv___3, currentarv___4, currentarv___5, currentarv___6, currentarv___7, currentarv___8, currentarv___9, currentarv___10, currentarv___11, currentarv___12, currentarv___13, currentarv___98, hivvl_date, houseroom, peoplehouse, kidshouse, amenities___5, amenities___6, smoke, alcohol, freq_etoh, drunk, drunk_freq, recdrugs___0, recdrugs___1, recdrugs___2, recdrugs___3, recdrugs___4, recdrugs___5, recdrugs___6, recdrugs___98, memsbottle, status, memsbottle_fu, overnight_times, duration_time1, where_time1, duration_time2, where_time2, duration_time3, where_time3, duration_time4, where_time4, duration_time5, where_time5, duration_time6, where_time6, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, newdisclose, numbervl, vl1date, numbercd4, vl1_undetect, vl1value, cd41abs, cd41pct, vl2date, vl2_undetect, vl2value, cd42abs, cd42pct, vl3date, vl3_undetect, vl3value, cd43abs, cd43pct, vl4date, vl4_undetect, vl4value, cd44abs, cd44pct, remaining_1, dispensed_1, perday_1, adherence1, difference_1, difference_howmany_1, arv5difference_1_1, remaining_arv1_1, perday_arv1_1, adherence_arv1_1, arv5difference_2_1, remaining_arv2_1, perday_arv2_1, adherence_arv2_1, arv5difference_3_1, remaining_arv3_1, perday_arv3_1, adherence_arv3_1, remaining_2, dispensed_2, perday_2, adherence2, difference_2, difference_howmany_2, arv5difference_1_2, remaining_arv1_2, perday_arv1_2, adherence_arv1_2, arv5difference_2_2, remaining_arv2_2, perday_arv2_2, adherence_arv2_2, arv5difference_3_2, remaining_arv3_2, perday_arv3_2, adherence_arv3_2, remaining_3, dispensed_3, perday_3, adherence3, difference_3, difference_howmany_3, arv5difference_1_3, remaining_arv1_3, perday_arv1_3, adherence_arv1_3, arv5difference_2_3, remaining_arv2_3, perday_arv2_3, adherence_arv2_3, arv5difference_3_3, remaining_arv3_3, perday_arv3_3, adherence_arv3_3, remaining_4, dispensed_4, perday_4, adherence4, difference_4, difference_howmany_4, arv5difference_1_4, remaining_arv1_4, perday_arv1_4, adherence_arv1_4, arv5difference_2_4, remaining_arv2_4, perday_arv2_4, adherence_arv2_4, arv5difference_3_4, remaining_arv3_4, perday_arv3_4, adherence_arv3_4)
#Creating new visit variable
data <- data %>% mutate(month = ifelse(redcap_event_name=="month_0_eligibilit_arm_1", 0, ifelse(redcap_event_name=="month_3_arm_1", 3, ifelse(redcap_event_name=="month_6_arm_1", 6, ifelse(redcap_event_name=="month_9_arm_1", 9, ifelse(redcap_event_name=="month_12_arm_1", 12, ifelse(redcap_event_name=="month_15_arm_1", 15, ifelse(redcap_event_name=="month_18_arm_1", 18, ifelse(redcap_event_name=="month_21_arm_21", 21, ifelse(redcap_event_name=="month_24_final_vis_arm_1", 24, ifelse(redcap_event_name=="month_27_arm_1", 27, ifelse(redcap_event_name=="month_30_arm_1", 30, ifelse(redcap_event_name=="month_33_arm_1", 33, ifelse(redcap_event_name=="month_36_arm_1", 36, ifelse(redcap_event_name=="month_42_arm_1", 42, ifelse(redcap_event_name=="month_48_arm_1", 48, ifelse(redcap_event_name=="month_54_arm_1", 54, 999)))))))))))))))))
#Removing study ID < 401 and withdrawal/completion visit row
data <- data %>% subset(study_id < 401) %>%
subset(month != 999)
#Generate socioeconomic variable, drop interim socioeconomic variables
data <- data %>% mutate(houseppl_ratio = houseroom/peoplehouse, socio_house = if_else(houseppl_ratio > 1, 1, 0), socio_total = socio_house + amenities___5 + amenities___6) %>%
subset(select = -c(houseroom, peoplehouse, amenities___5, amenities___6, houseppl_ratio, socio_house))
#Generate age at diagnosis and age at ART initiation
data$dob <- ymd(data$dob)
data$hivdx <- ymd(data$hivdx)
data$initiatearv <- ymd(data$initiatearv)
data <- data %>%
mutate(age_dx = (dob %--% hivdx) / years(1)) %>%
mutate(age_tx = (dob %--% initiatearv) / years(1))
#Generating detectable viral load variable - if VL was detectable at any lab for a given visit, consider patient detectable
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ .x == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0, na.rm = TRUE), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0, na.rm = FALSE), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(case_when(if_any(.cols = c(vl1_undetect, vl2_undetect, vl3_undetect, vl4_undetect), ~ . == 0), 1, 0)))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c("vl1_undetect", "vl2_undetect", "vl3_undetect", "vl4_undetect"), ~ . == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c("vl1_undetect", "vl2_undetect", "vl3_undetect", "vl4_undetect"), ~ == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(.cols = c("vl1_undetect", "vl2_undetect", "vl3_undetect", "vl4_undetect"), ~ 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(ends_with("undetect"), ~ . == 0), 1, 0))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(ends_with("undetect"), ~ . == 0, na.rm = TRUE), 1, 0))
data <- data %>%
mutate_at(c("vl1_undetect", "vl2_undetect", "vl3_undetect", "vl4_undetect"), ~replace_na(. ,999))
data <- read.csv("rawdata_11.20.22.csv")
#Dropping unnecessary variables
data <- data %>% select(study_id, dob, sex, momalive, dadalive, adol_ed, attendsch, occupation, hivdx, initiatearv, redcap_event_name, detectable, vlvalue, sex, currentarv___1, currentarv___2, currentarv___3, currentarv___4, currentarv___5, currentarv___6, currentarv___7, currentarv___8, currentarv___9, currentarv___10, currentarv___11, currentarv___12, currentarv___13, currentarv___98, hivvl_date, houseroom, peoplehouse, kidshouse, amenities___5, amenities___6, smoke, alcohol, freq_etoh, drunk, drunk_freq, recdrugs___0, recdrugs___1, recdrugs___2, recdrugs___3, recdrugs___4, recdrugs___5, recdrugs___6, recdrugs___98, memsbottle, status, memsbottle_fu, overnight_times, duration_time1, where_time1, duration_time2, where_time2, duration_time3, where_time3, duration_time4, where_time4, duration_time5, where_time5, duration_time6, where_time6, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, newdisclose, numbervl, vl1date, numbercd4, vl1_undetect, vl1value, cd41abs, cd41pct, vl2date, vl2_undetect, vl2value, cd42abs, cd42pct, vl3date, vl3_undetect, vl3value, cd43abs, cd43pct, remaining_1, dispensed_1, perday_1, adherence1, difference_1, difference_howmany_1, arv5difference_1_1, remaining_arv1_1, perday_arv1_1, adherence_arv1_1, arv5difference_2_1, remaining_arv2_1, perday_arv2_1, adherence_arv2_1, arv5difference_3_1, remaining_arv3_1, perday_arv3_1, adherence_arv3_1, remaining_2, dispensed_2, perday_2, adherence2, difference_2, difference_howmany_2, arv5difference_1_2, remaining_arv1_2, perday_arv1_2, adherence_arv1_2, arv5difference_2_2, remaining_arv2_2, perday_arv2_2, adherence_arv2_2, arv5difference_3_2, remaining_arv3_2, perday_arv3_2, adherence_arv3_2, remaining_3, dispensed_3, perday_3, adherence3, difference_3, difference_howmany_3, arv5difference_1_3, remaining_arv1_3, perday_arv1_3, adherence_arv1_3, arv5difference_2_3, remaining_arv2_3, perday_arv2_3, adherence_arv2_3, arv5difference_3_3, remaining_arv3_3, perday_arv3_3, adherence_arv3_3, remaining_4, dispensed_4, perday_4, adherence4, difference_4, difference_howmany_4, arv5difference_1_4, remaining_arv1_4, perday_arv1_4, adherence_arv1_4, arv5difference_2_4, remaining_arv2_4, perday_arv2_4, adherence_arv2_4, arv5difference_3_4, remaining_arv3_4, perday_arv3_4, adherence_arv3_4)
#Creating new visit variable
data <- data %>% mutate(month = ifelse(redcap_event_name=="month_0_eligibilit_arm_1", 0, ifelse(redcap_event_name=="month_3_arm_1", 3, ifelse(redcap_event_name=="month_6_arm_1", 6, ifelse(redcap_event_name=="month_9_arm_1", 9, ifelse(redcap_event_name=="month_12_arm_1", 12, ifelse(redcap_event_name=="month_15_arm_1", 15, ifelse(redcap_event_name=="month_18_arm_1", 18, ifelse(redcap_event_name=="month_21_arm_21", 21, ifelse(redcap_event_name=="month_24_final_vis_arm_1", 24, ifelse(redcap_event_name=="month_27_arm_1", 27, ifelse(redcap_event_name=="month_30_arm_1", 30, ifelse(redcap_event_name=="month_33_arm_1", 33, ifelse(redcap_event_name=="month_36_arm_1", 36, ifelse(redcap_event_name=="month_42_arm_1", 42, ifelse(redcap_event_name=="month_48_arm_1", 48, ifelse(redcap_event_name=="month_54_arm_1", 54, 999)))))))))))))))))
#Removing study ID < 401 and withdrawal/completion visit row
data <- data %>% subset(study_id < 401) %>%
subset(month != 999)
#Generate socioeconomic variable, drop interim socioeconomic variables
data <- data %>% mutate(houseppl_ratio = houseroom/peoplehouse, socio_house = if_else(houseppl_ratio > 1, 1, 0), socio_total = socio_house + amenities___5 + amenities___6) %>%
subset(select = -c(houseroom, peoplehouse, amenities___5, amenities___6, houseppl_ratio, socio_house))
#Generate age at diagnosis and age at ART initiation
data$dob <- ymd(data$dob)
data$hivdx <- ymd(data$hivdx)
data$initiatearv <- ymd(data$initiatearv)
data <- data %>%
mutate(age_dx = (dob %--% hivdx) / years(1)) %>%
mutate(age_tx = (dob %--% initiatearv) / years(1))
data <- data %>%
mutate_at(c("vl1_undetect", "vl2_undetect", "vl3_undetect"), ~replace_na(. ,999))
data <- data %>%
mutate(detectable_fu = ifelse(if_any(ends_with("undetect"), ~ . == 0), 1, 0))
data <- data %>%
select(study_id, sex, dob, month, age_dx, age_tx, momalive, dadalive, adol_ed, detectable, detectable_fu, kidshouse, smoke, alcohol, freq_etoh, drunk, drunk_freq, status, newdisclose, overnight_times, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, detectable, socio_total)
data_wide <- pivot_wider(data, id_cols = study_id, names_from = month, values_from = c(sex, dob, age_dx, age_tx, momalive, dadalive, adol_ed, detectable, detectable_fu, kidshouse, smoke, alcohol, freq_etoh, drunk, drunk_freq, status, newdisclose, overnight_times, mjrlife___1, mjrlife___2, mjrlife___3, mjrlife___4, mjrlife___5, mjrlife___6, mjrlife___7, mjrlife___98, detectable, socio_total))
View(data_wide)
data_wide <- data_wide[, -c(3:16, 18:31, 33:46, 48:61, 63:76, 78:91, 93:106, 108:122, 138:151, 153:166, 168:181, 183:196, 198:211, 213:226, 228:242, 257, 393:406)]
View(data_wide)
write.csv(data, "clinicaldata_wide.csv")
full_data <- left_join(data_wide, adherence, by = study_id)
full_data <- left_join(data_wide, adherence, by = "study_id")
View(full_data)
full_data <- full_data %>% subset(!duplicated(study_id))
write.csv(full_data, "analysis_data_12.4.22.csv")
knitr::opts_chunk$set(echo = T, fig.width=8, fig.height=4)
options(scipen = 0, digits = 3)  # controls base R output
# Package setup
if(!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, dplyr, ggplot2, ggthemes, data.table, lubridate,
GGally, RColorBrewer, ggsci, plotROC, usmap,
plotly, ggpubr, vistime)
knitr::opts_chunk$set(echo = FALSE, fig.width = 7, fig.height = 4)
if(!require("pacman")) install.packages("pacman")
pacman::p_load(dplyr, ggplot2, glmnet, data.table, table1, gglasso)
readmission <- read.csv("readmission.csv")
length(unique(readmission$patient_nbr))
#Identifying duplicate patients. Removing duplicates so that independence assumption isn't violated. Keeping only earliest admission for duplicated patients.
readmission[duplicated(readmission$patient_nbr), ]
readmission <- readmission %>%
group_by(patient_nbr) %>% arrange(encounter_id) %>%
distinct(patient_nbr, .keep_all = TRUE) %>%
ungroup()
table(readmission$race)
table(readmission$readmitted)
readmission$race[readmission$race == "?"] <- "Unknown"
readmission$change[readmission$change == "Ch"] <- "Yes"
readmission <- readmission %>% mutate(readmit = ifelse(readmitted == "<30", "Yes", "No"))
readmission$readmit <- as.factor(readmission$readmit)
table(readmission$num_lab_procedures)
table(readmission$num_medications)
table(readmission$num_procedures)
table(readmission$number_diagnoses)
table(readmission$number_outpatient)
table(readmission$number_emergency)
table(readmission$number_inpatient)
summary(readmission$number_outpatient)
summary(readmission$number_emergency)
summary(readmission$number_inpatient)
#Individuals with diabetes should visit the doctor 2x/year if glucose goals are met, or 4x year if they are not. Will therefore categorize outpatient visits as 0, 1-2, 3-4, 5+.
readmission <- readmission %>% mutate(outpatient = ifelse(number_outpatient == 0, "None", ifelse(number_outpatient == 1 | number_outpatient == 2, "1-2/Year", ifelse(number_outpatient == 3 | number_outpatient == 4, "3-4/Year", "5+/Year"))))
table(readmission$number_outpatient, readmission$outpatient)
#Re-categorizing emergency visits and inpatient visits as binary (0=none, 1=1+). These types of visits should not be routine with healthy patients with well-managed diabetes so presence of either indicates potential additional risk factors.
readmission <- readmission %>% mutate(emergency = ifelse(number_emergency == 0, "0", "1+"), inpatient = ifelse(number_inpatient == 0, "0", "1+"))
readmission$emergency <- as.factor(readmission$emergency)
readmission$inpatient <- as.factor(readmission$inpatient)
#Dropping unneeded variables
readmit_clean <- readmission %>% dplyr::select(-c(readmitted, number_outpatient, number_inpatient, number_emergency))
label(readmit_clean$race) <- "Race"
label(readmit_clean$gender) <- "Gender"
label(readmit_clean$time_in_hospital) <- "Length of Stay"
units(readmit_clean$time_in_hospital) <- "days"
label(readmit_clean$num_lab_procedures) <- "Number of Lab Procedures"
label(readmit_clean$num_procedures) <- "Number of Non-Lab Procedures"
label(readmit_clean$num_medications) <- "Number of Medications Prescribed During Encounter"
label(readmit_clean$number_diagnoses) <- "Number of Diagnoses"
label(readmit_clean$max_glu_serum) <- "Glucose Serum"
units(readmit_clean$max_glu_serum) <- "mg/dL"
label(readmit_clean$A1Cresult) <- "HbA1c"
units(readmit_clean$A1Cresult) <- "%"
label(readmit_clean$metformin) <- "Metformin Dose"
label(readmit_clean$glimepiride) <- "Glimepiride Dose"
label(readmit_clean$glipizide) <- "Glipizide Dose"
label(readmit_clean$glyburide) <- "Glyburide Dose"
label(readmit_clean$pioglitazone) <- "Pioglitazone Dose"
label(readmit_clean$rosiglitazone) <- "Rosiglitazone Dose"
label(readmit_clean$insulin) <- "Insulin Dose"
label(readmit_clean$change) <- "Change in Diabetes Medication During Encounter"
label(readmit_clean$diabetesMed) <- "Any Diabetes Medication Prescribed During Encounter"
label(readmit_clean$disch_disp_modified) <- "Discharge Location"
label(readmit_clean$adm_src_mod) <- "Source of Admission"
label(readmit_clean$adm_typ_mod) <- "Reason for Admission"
label(readmit_clean$age_mod) <- "Age Group"
label(readmit_clean$diag1_mod) <- "Diagnosis 1"
label(readmit_clean$diag2_mod) <- "Diagnosis 2"
label(readmit_clean$diag3_mod) <- "Diagnosis 3"
label(readmit_clean$outpatient) <- "Number of Outpatient Visits in Prior Year"
label(readmit_clean$emergency) <- "Number of Emergency Visits in Prior Year"
label(readmit_clean$inpatient) <- "Number of Inpatient Visits in Prior Year"
#Function to perform t-tests and chi-square tests for Table 1 variables
pvalue <- function(x, ...) {
# Construct vectors of data y, and groups (strata) g
y <- unlist(x)
g <- factor(rep(1:length(x), times=sapply(x, length)))
if (is.numeric(y)) {
# For numeric variables, perform a standard 2-sample t-test
p <- t.test(y ~ g)$p.value
} else {
# For categorical variables, perform a chi-squared test of independence
p <- chisq.test(table(y, g))$p.value
}
# Format the p-value, using an HTML entity for the less-than sign.
# The initial empty string places the output on the line below the variable label.
c("", sub("<", "&lt;", format.pval(p, digits=3, eps=0.001)))
}
#Creation of traditional "Table 1" with selected variables.
table1_brief <- table1(~ age_mod + race + gender + time_in_hospital + max_glu_serum + A1Cresult + outpatient + emergency + inpatient + disch_disp_modified | factor(readmit), data = readmit_clean, overall = F, extra.col=list(`P-value`=pvalue), caption = "Table 1: Basic descriptive statistics of the study population by whether they were readmitted to the hospital within 30 days or not.")
table1_brief
#Drop ID columns, generate X and Y
readmit <- readmit_clean %>% select(-c(encounter_id, patient_nbr)) %>% relocate(readmit)
X <- model.matrix(readmit~., readmit)[,-1]
dim(X)
Y <- readmit[, 1]
set.seed(12345)
fit1.cv <- cv.glmnet(X, Y, alpha=1, family="binomial", nfolds = 10, type.measure = "deviance")
Y <- as.matrix(readmit[, 1])
set.seed(12345)
fit1.cv <- cv.glmnet(X, Y, alpha=1, family="binomial", nfolds = 10, type.measure = "deviance")
setwd("C:/Users/nighki01/Box Sync/SUIP Materials")
# Friday, July 14
## Compartmental Models
- Tutorial link
